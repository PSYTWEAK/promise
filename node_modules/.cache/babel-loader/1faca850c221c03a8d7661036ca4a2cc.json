{"ast":null,"code":"import _slicedToArray from \"/Users/nanoissuperior/prom/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/nanoissuperior/prom/client/src/pages/FindPromise.js\";\nimport React, { useState } from \"react\";\nimport TableOfPromises from \"../components/TableOfPromises.js\";\nimport TokenAddressInput from \"../components/TokenAddressInput.js\";\nexport default function FindPromise({\n  prom,\n  assetA,\n  assetB,\n  assetAInstance,\n  assetBInstance\n}) {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        pairID = _useState2[0],\n        setPairID = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        joinablePromises = _useState4[0],\n        setJoinablePromises = _useState4[1];\n\n  useEffect(() => {\n    if (assetB) {\n      if (assetBInstance) {\n        checkBalance(\"B\");\n        checkAllowance(\"B\");\n      } else if (web3.utils.isAddress(assetB)) {\n        createTokenInstance(\"B\");\n      }\n    }\n\n    if (assetA) {\n      if (assetAInstance) {\n        checkBalance(\"A\");\n        checkAllowance(\"A\");\n      } else if (web3.utils.isAddress(assetA)) {\n        createTokenInstance(\"A\");\n      }\n    }\n\n    if (assetAInstance && assetBInstance) {\n      getAllPromises();\n    }\n  }, [assetB, amountB]);\n\n  async function getPairID() {\n    setPairID((await prom.methods.getJoinablePromises(assetA, assetB).call()));\n  }\n\n  async function getAllPromises() {\n    var promiseIds = await prom.methods.getJoinablePromises(assetA, assetB).call();\n    var joinablePromises = [];\n\n    for (var i = 0; i < promiseIds.length; i++) {\n      var a = promiseIds[i].toString();\n      var p = await prom.methods.getPromise(a).call();\n      joinablePromises.push(p);\n    }\n\n    setJoinablePromises(joinablePromises);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(TokenAddressInput, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(TableOfPromises, {\n    joinablePromises: joinablePromises,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/Users/nanoissuperior/prom/client/src/pages/FindPromise.js"],"names":["React","useState","TableOfPromises","TokenAddressInput","FindPromise","prom","assetA","assetB","assetAInstance","assetBInstance","pairID","setPairID","joinablePromises","setJoinablePromises","useEffect","checkBalance","checkAllowance","web3","utils","isAddress","createTokenInstance","getAllPromises","amountB","getPairID","methods","getJoinablePromises","call","promiseIds","i","length","a","toString","p","getPromise","push"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,OAAOC,eAAP,MAA4B,kCAA5B;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AAEA,eAAe,SAASC,WAAT,CAAqB;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,MAAR;AAAgBC,EAAAA,MAAhB;AAAwBC,EAAAA,cAAxB;AAAwCC,EAAAA;AAAxC,CAArB,EAA+E;AAAA,oBAChER,QAAQ,CAAC,IAAD,CADwD;AAAA;AAAA,QACrFS,MADqF;AAAA,QAC7EC,SAD6E;;AAAA,qBAE5CV,QAAQ,CAAC,IAAD,CAFoC;AAAA;AAAA,QAErFW,gBAFqF;AAAA,QAEnEC,mBAFmE;;AAI5FC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIP,MAAJ,EAAY;AACV,UAAIE,cAAJ,EAAoB;AAClBM,QAAAA,YAAY,CAAC,GAAD,CAAZ;AACAC,QAAAA,cAAc,CAAC,GAAD,CAAd;AACD,OAHD,MAGO,IAAIC,IAAI,CAACC,KAAL,CAAWC,SAAX,CAAqBZ,MAArB,CAAJ,EAAkC;AACvCa,QAAAA,mBAAmB,CAAC,GAAD,CAAnB;AACD;AACF;;AACD,QAAId,MAAJ,EAAY;AACV,UAAIE,cAAJ,EAAoB;AAClBO,QAAAA,YAAY,CAAC,GAAD,CAAZ;AACAC,QAAAA,cAAc,CAAC,GAAD,CAAd;AACD,OAHD,MAGO,IAAIC,IAAI,CAACC,KAAL,CAAWC,SAAX,CAAqBb,MAArB,CAAJ,EAAkC;AACvCc,QAAAA,mBAAmB,CAAC,GAAD,CAAnB;AACD;AACF;;AACD,QAAIZ,cAAc,IAAIC,cAAtB,EAAsC;AACpCY,MAAAA,cAAc;AACf;AACF,GApBQ,EAoBN,CAACd,MAAD,EAASe,OAAT,CApBM,CAAT;;AAsBA,iBAAeC,SAAf,GAA2B;AACzBZ,IAAAA,SAAS,EAAC,MAAMN,IAAI,CAACmB,OAAL,CAAaC,mBAAb,CAAiCnB,MAAjC,EAAyCC,MAAzC,EAAiDmB,IAAjD,EAAP,EAAT;AACD;;AAED,iBAAeL,cAAf,GAAgC;AAC9B,QAAIM,UAAU,GAAG,MAAMtB,IAAI,CAACmB,OAAL,CAAaC,mBAAb,CAAiCnB,MAAjC,EAAyCC,MAAzC,EAAiDmB,IAAjD,EAAvB;AACA,QAAId,gBAAgB,GAAG,EAAvB;;AAEA,SAAK,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,UAAU,CAACE,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;AAC1C,UAAIE,CAAC,GAAGH,UAAU,CAACC,CAAD,CAAV,CAAcG,QAAd,EAAR;AACA,UAAIC,CAAC,GAAG,MAAM3B,IAAI,CAACmB,OAAL,CAAaS,UAAb,CAAwBH,CAAxB,EAA2BJ,IAA3B,EAAd;AAEAd,MAAAA,gBAAgB,CAACsB,IAAjB,CAAsBF,CAAtB;AACD;;AAEDnB,IAAAA,mBAAmB,CAACD,gBAAD,CAAnB;AACD;;AACD,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,eAAD;AAAiB,IAAA,gBAAgB,EAAEA,gBAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD","sourcesContent":["import React, { useState } from \"react\";\n\nimport TableOfPromises from \"../components/TableOfPromises.js\";\nimport TokenAddressInput from \"../components/TokenAddressInput.js\";\n\nexport default function FindPromise({ prom, assetA, assetB, assetAInstance, assetBInstance }) {\n  const [pairID, setPairID] = useState(null);\n  const [joinablePromises, setJoinablePromises] = useState(null);\n\n  useEffect(() => {\n    if (assetB) {\n      if (assetBInstance) {\n        checkBalance(\"B\");\n        checkAllowance(\"B\");\n      } else if (web3.utils.isAddress(assetB)) {\n        createTokenInstance(\"B\");\n      }\n    }\n    if (assetA) {\n      if (assetAInstance) {\n        checkBalance(\"A\");\n        checkAllowance(\"A\");\n      } else if (web3.utils.isAddress(assetA)) {\n        createTokenInstance(\"A\");\n      }\n    }\n    if (assetAInstance && assetBInstance) {\n      getAllPromises();\n    }\n  }, [assetB, amountB]);\n\n  async function getPairID() {\n    setPairID(await prom.methods.getJoinablePromises(assetA, assetB).call());\n  }\n\n  async function getAllPromises() {\n    var promiseIds = await prom.methods.getJoinablePromises(assetA, assetB).call();\n    var joinablePromises = [];\n\n    for (var i = 0; i < promiseIds.length; i++) {\n      var a = promiseIds[i].toString();\n      var p = await prom.methods.getPromise(a).call();\n\n      joinablePromises.push(p);\n    }\n\n    setJoinablePromises(joinablePromises);\n  }\n  return (\n    <div>\n      <TokenAddressInput />\n      <TableOfPromises joinablePromises={joinablePromises} />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}